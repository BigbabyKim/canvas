<script>
    document.addEventListener('DOMContentLoaded', function() {
        fn_loading('700', 12);
    });

    function fn_loading(width, count) {
        var loadingCanvas = document.querySelector(".loadingCanvas");
        var ctx = loadingCanvas.getContext('2d');

        loadingCanvas.width = width;
        loadingCanvas.height = width;

        var deg = 0;

        drawCtx();

        function drawCtx() {
            ctx.clearRect(0, 0, width, width);

            //drawBack();
            drawloading(deg, count);

            deg += 360 / count;
            setTimeout(drawCtx, 100);
        };

        /*function drawBack() {
            var deg1 = 0;

            Object.assign(ctx, {
                shadowBlur: 0,
                shadowOffsetX: 0,
                shadowOffsetY: 0,
            });

            ctx.beginPath();
            ctx.arc(width / 2, width / 2, width, 0, Math.PI * 2);
            ctx.fillStyle = '#fff';
            ctx.fill();

            for (let i = 0; i < 12; i++) {
                deg1 += 30;
                var x = ((width * 0.8) / 2) * Math.cos(deg1 * Math.PI / 180);
                var y = ((width * 0.8) / 2) * Math.sin(deg1 * Math.PI / 180);

                ctx.beginPath();
                ctx.arc(x + width / 2, y + width / 2, width / 10, 0, Math.PI * 2);
                ctx.fillStyle = '#F2EFFB';
                ctx.fill();
            };
        };*/

        function drawloading(deg, count) {
            color = [130, 88, 250];

            for (var i = 0; i < count; i++) {
                deg -= 360 / count;
                var x = ((width * 0.8) / 2) * Math.cos(deg * Math.PI / 180);
                var y = ((width * 0.8) / 2) * Math.sin(deg * Math.PI / 180);

                ctx.beginPath();
                ctx.arc(x + width / 2, y + width / 2, width / (10 + i) * 12 / count, 0, Math.PI * 2);
                ctx.fillStyle = `rgb(${color[0]}, ${color[1]}, ${color[2]})`;
                ctx.fill();

                color = color.map(item => item + 100 / count);
            };
        };
    };
</script>

<body>
    <canvas class="loadingCanvas"></canvas>
</body>